<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Devriye Takip Sistemi - Web</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Poppins:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Cyberpunk/Tech Theme */
            --primary: #00ff88;
            --primary-dark: #00cc6a;
            --secondary: #ff0055;
            --accent: #00d4ff;
            --dark: #0a0e27;
            --dark-light: #1a1f3a;
            --dark-lighter: #2a2f4a;
            --text: #ffffff;
            --text-dim: #a0a5bb;
            --success: #00ff88;
            --warning: #ffaa00;
            --danger: #ff0055;
            --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --glow: 0 0 20px rgba(0, 255, 136, 0.3);
            --glow-strong: 0 0 40px rgba(0, 255, 136, 0.6);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--dark);
            color: var(--text);
            overflow-x: hidden;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 20%, rgba(0, 255, 136, 0.05) 0%, transparent 50%);
            animation: backgroundShift 20s ease infinite;
            z-index: 0;
        }

        @keyframes backgroundShift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-5%, -5%) rotate(5deg); }
        }

        /* Grid Pattern Overlay */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 136, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 136, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            pointer-events: none;
            z-index: 1;
        }

        #root {
            position: relative;
            z-index: 2;
            min-height: 100vh;
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: rgba(26, 31, 58, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid var(--primary);
            padding: 20px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 28px;
            font-weight: 900;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--primary);
            text-shadow: var(--glow);
        }

        .logo i {
            font-size: 40px;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .status-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid var(--primary);
            border-radius: 50px;
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-dot {
            width: 10px;
            height: 10px;
            background: var(--primary);
            border-radius: 50%;
            animation: blink 1.5s ease infinite;
            box-shadow: var(--glow);
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 5px;
            padding: 20px 30px;
            background: rgba(26, 31, 58, 0.5);
            border-bottom: 1px solid rgba(0, 255, 136, 0.2);
        }

        .nav-tab {
            flex: 1;
            padding: 15px 25px;
            background: transparent;
            border: 2px solid transparent;
            color: var(--text-dim);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-size: 14px;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.1), transparent);
            transition: left 0.5s;
        }

        .nav-tab:hover::before {
            left: 100%;
        }

        .nav-tab:hover {
            color: var(--primary);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .nav-tab.active {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--primary);
            color: var(--primary);
            box-shadow: var(--glow);
        }

        /* Main Content */
        .main-content {
            padding: 40px 30px;
        }

        /* Cards */
        .card {
            background: rgba(26, 31, 58, 0.6);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(0, 255, 136, 0.2);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, var(--primary), var(--accent), var(--secondary));
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .card:hover {
            border-color: var(--primary);
            box-shadow: var(--glow);
            transform: translateY(-5px);
        }

        .card:hover::before {
            opacity: 0.5;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(0, 255, 136, 0.2);
        }

        .card-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .card-title i {
            font-size: 28px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: rgba(26, 31, 58, 0.8);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(0, 255, 136, 0.2), transparent);
            transform: translate(-50%, -50%);
            opacity: 0;
            transition: all 0.5s;
        }

        .stat-card:hover {
            border-color: var(--primary);
            box-shadow: var(--glow);
            transform: scale(1.05);
        }

        .stat-card:hover::after {
            opacity: 1;
            width: 200px;
            height: 200px;
        }

        .stat-icon {
            font-size: 48px;
            margin-bottom: 15px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .stat-value {
            font-size: 42px;
            font-weight: 900;
            font-family: 'Space Mono', monospace;
            color: var(--primary);
            margin-bottom: 5px;
            text-shadow: var(--glow);
        }

        .stat-label {
            font-size: 14px;
            color: var(--text-dim);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            color: var(--primary);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 13px;
        }

        .form-input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(10, 14, 39, 0.6);
            border: 2px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            color: var(--text);
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: 'Poppins', sans-serif;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: var(--glow);
        }

        .form-input::placeholder {
            color: var(--text-dim);
        }

        /* Buttons */
        .btn {
            padding: 15px 35px;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 14px;
            position: relative;
            overflow: hidden;
            font-family: 'Poppins', sans-serif;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn span {
            position: relative;
            z-index: 1;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--dark);
            box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 15px 40px rgba(0, 255, 136, 0.5);
            transform: translateY(-3px);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--secondary), #cc0044);
            color: var(--text);
            box-shadow: 0 10px 30px rgba(255, 0, 85, 0.3);
        }

        .btn-danger:hover {
            box-shadow: 0 15px 40px rgba(255, 0, 85, 0.5);
            transform: translateY(-3px);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: var(--dark);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* NFC Scanner */
        .nfc-scanner {
            text-align: center;
            padding: 60px 40px;
            background: rgba(10, 14, 39, 0.8);
            border: 3px dashed rgba(0, 255, 136, 0.3);
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .nfc-scanner.scanning {
            border-color: var(--primary);
            box-shadow: var(--glow-strong);
            animation: scanPulse 2s ease infinite;
        }

        @keyframes scanPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .nfc-icon {
            font-size: 120px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            animation: float 3s ease infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .nfc-status {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .nfc-description {
            color: var(--text-dim);
            margin-bottom: 30px;
            font-size: 16px;
        }

        /* Point List */
        .point-list {
            display: grid;
            gap: 15px;
        }

        .point-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(10, 14, 39, 0.6);
            border: 2px solid rgba(0, 255, 136, 0.2);
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .point-item:hover {
            border-color: var(--primary);
            background: rgba(10, 14, 39, 0.8);
            transform: translateX(5px);
        }

        .point-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .point-number {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: var(--dark);
            font-weight: 900;
            font-size: 20px;
            border-radius: 10px;
            box-shadow: var(--glow);
        }

        .point-details h4 {
            font-size: 18px;
            margin-bottom: 5px;
            color: var(--text);
        }

        .point-details p {
            font-size: 13px;
            color: var(--text-dim);
            font-family: 'Space Mono', monospace;
        }

        .point-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .point-status.checked {
            background: rgba(0, 255, 136, 0.2);
            color: var(--success);
            border: 2px solid var(--success);
        }

        .point-status.unchecked {
            background: rgba(255, 0, 85, 0.2);
            color: var(--danger);
            border: 2px solid var(--danger);
        }

        /* Report Table */
        .report-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 10px;
        }

        .report-table thead th {
            padding: 15px;
            text-align: left;
            color: var(--primary);
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 2px;
            font-weight: 700;
            border-bottom: 2px solid rgba(0, 255, 136, 0.3);
        }

        .report-table tbody tr {
            background: rgba(10, 14, 39, 0.6);
            transition: all 0.3s ease;
        }

        .report-table tbody tr:hover {
            background: rgba(10, 14, 39, 0.9);
            transform: scale(1.02);
            box-shadow: var(--glow);
        }

        .report-table tbody td {
            padding: 20px 15px;
            border-top: 2px solid rgba(0, 255, 136, 0.1);
            border-bottom: 2px solid rgba(0, 255, 136, 0.1);
        }

        .report-table tbody td:first-child {
            border-left: 2px solid rgba(0, 255, 136, 0.1);
            border-radius: 10px 0 0 10px;
        }

        .report-table tbody td:last-child {
            border-right: 2px solid rgba(0, 255, 136, 0.1);
            border-radius: 0 10px 10px 0;
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 255, 136, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Alert Messages */
        .alert {
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-weight: 600;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .alert-success {
            background: rgba(0, 255, 136, 0.1);
            border: 2px solid var(--success);
            color: var(--success);
        }

        .alert-danger {
            background: rgba(255, 0, 85, 0.1);
            border: 2px solid var(--danger);
            color: var(--danger);
        }

        .alert-warning {
            background: rgba(255, 170, 0, 0.1);
            border: 2px solid var(--warning);
            color: var(--warning);
        }

        .alert i {
            font-size: 24px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
                padding: 0 20px;
            }

            .logo {
                font-size: 24px;
            }

            .nav-tabs {
                flex-direction: column;
                padding: 15px 20px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .point-item {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .report-table {
                font-size: 12px;
            }

            .report-table thead th,
            .report-table tbody td {
                padding: 10px;
            }
        }

        /* Animations for page load */
        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .slide-up {
            animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: var(--text-dim);
        }

        .empty-state i {
            font-size: 80px;
            margin-bottom: 25px;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--text);
        }

        .empty-state p {
            font-size: 16px;
            margin-bottom: 30px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback } = React;

        // LocalStorage Database Manager
        const DB = {
            get: (key) => {
                const data = localStorage.getItem(key);
                return data ? JSON.parse(data) : null;
            },
            set: (key, value) => {
                localStorage.setItem(key, JSON.stringify(value));
            },
            remove: (key) => {
                localStorage.removeItem(key);
            },
            getPoints: () => DB.get('points') || [],
            setPoints: (points) => DB.set('points', points),
            getControls: () => DB.get('controls') || [],
            setControls: (controls) => DB.set('controls', controls),
            getShift: () => DB.get('currentShift'),
            setShift: (shift) => DB.set('currentShift', shift),
            clearShift: () => DB.remove('currentShift')
        };

        // NFC Manager
        const NFCManager = {
            isSupported: () => 'NDEFReader' in window,
            
            startScan: async (onTagRead) => {
                if (!NFCManager.isSupported()) {
                    alert('⚠ NFC bu tarayıcıda desteklenmiyor!\n\nChrome Android kullanın.');
                    return null;
                }

                try {
                    const ndef = new NDEFReader();
                    await ndef.scan();
                    
                    ndef.addEventListener('reading', ({ serialNumber }) => {
                        onTagRead(serialNumber);
                    });

                    return ndef;
                } catch (error) {
                    console.error('NFC hatası:', error);
                    alert('NFC başlatılamadı: ' + error.message);
                    return null;
                }
            }
        };

        function App() {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [shift, setShift] = useState(null);
            const [points, setPoints] = useState([]);
            const [controls, setControls] = useState([]);
            const [scanning, setScanning] = useState(false);
            const [alert, setAlert] = useState(null);

            useEffect(() => {
                // Load data from localStorage
                setShift(DB.getShift());
                setPoints(DB.getPoints());
                setControls(DB.getControls());
            }, []);

            const showAlert = (message, type = 'success') => {
                setAlert({ message, type });
                setTimeout(() => setAlert(null), 5000);
            };

            const startShift = (name) => {
                const newShift = {
                    id: Date.now(),
                    personnel: name,
                    start: new Date().toISOString(),
                    status: 'active'
                };
                DB.setShift(newShift);
                setShift(newShift);
                showAlert(✅ Vardiya başlatıldı - ${name}, 'success');
            };

            const endShift = () => {
                if (shift) {
                    const updatedShift = { ...shift, end: new Date().toISOString(), status: 'completed' };
                    DB.clearShift();
                    setShift(null);
                    showAlert('✅ Vardiya tamamlandı', 'success');
                }
            };

            const addPoint = (name, nfcId, description) => {
                const newPoint = {
                    id: Date.now(),
                    name,
                    nfcId,
                    description,
                    active: true
                };
                const updatedPoints = [...points, newPoint];
                DB.setPoints(updatedPoints);
                setPoints(updatedPoints);
                showAlert(✅ ${name} eklendi!, 'success');
            };

            const recordControl = (pointId, nfcId) => {
                const point = points.find(p => p.nfcId === nfcId);
                
                if (!point) {
                    showAlert('❌ Tanımlanmamış NFC etiketi!', 'danger');
                    return;
                }

                const newControl = {
                    id: Date.now(),
                    pointId: point.id,
                    pointName: point.name,
                    personnel: shift?.personnel || 'Bilinmiyor',
                    timestamp: new Date().toISOString(),
                    location: null // Web API Geolocation kullanılabilir
                };

                const updatedControls = [...controls, newControl];
                DB.setControls(updatedControls);
                setControls(updatedControls);
                showAlert(✅ ${point.name} kontrol edildi!, 'success');
                
                // Vibration
                if ('vibrate' in navigator) {
                    navigator.vibrate(200);
                }
            };

            const getTodayControls = () => {
                const today = new Date().toDateString();
                return controls.filter(c => 
                    new Date(c.timestamp).toDateString() === today
                );
            };

            const getMissingPoints = () => {
                const todayControls = getTodayControls();
                const checkedIds = todayControls.map(c => c.pointId);
                return points.filter(p => !checkedIds.includes(p.id));
            };

            return (
                <>
                    <Header shift={shift} />
                    <Navigation activeTab={activeTab} setActiveTab={setActiveTab} />
                    
                    <div className="container main-content">
                        {alert && (
                            <div className={alert alert-${alert.type}}>
                                <i className={fas fa-${alert.type === 'success' ? 'check-circle' : alert.type === 'danger' ? 'times-circle' : 'exclamation-circle'}}></i>
                                <span>{alert.message}</span>
                            </div>
                        )}

                        {activeTab === 'dashboard' && (
                            <Dashboard 
                                shift={shift}
                                startShift={startShift}
                                endShift={endShift}
                                points={points}
                                controls={controls}
                                todayControls={getTodayControls()}
                                missingPoints={getMissingPoints()}
                            />
                        )}

                        {activeTab === 'nfc' && (
                            <NFCScanner 
                                shift={shift}
                                scanning={scanning}
                                setScanning={setScanning}
                                recordControl={recordControl}
                            />
                        )}

                        {activeTab === 'reports' && (
                            <Reports 
                                controls={getTodayControls()}
                                missingPoints={getMissingPoints()}
                            />
                        )}

                        {activeTab === 'points' && (
                            <PointManagement 
                                points={points}
                                addPoint={addPoint}
                            />
                        )}
                    </div>
                </>
            );
        }

        function Header({ shift }) {
            return (
                <header className="header">
                    <div className="header-content">
                        <div className="logo">
                            <i className="fas fa-shield-alt"></i>
                            <span>Devriye Takip</span>
                        </div>
                        <div className="status-badge">
                            <div className="status-dot"></div>
                            <span>{shift ? Aktif - ${shift.personnel} : 'Vardiya Yok'}</span>
                        </div>
                    </div>
                </header>
            );
        }

        function Navigation({ activeTab, setActiveTab }) {
            const tabs = [
                { id: 'dashboard', label: 'Kontrol Paneli', icon: 'tachometer-alt' },
                { id: 'nfc', label: 'NFC Okuma', icon: 'wifi' },
                { id: 'reports', label: 'Raporlar', icon: 'chart-bar' },
                { id: 'points', label: 'Nokta Yönetimi', icon: 'map-marker-alt' }
            ];

            return (
                <nav className="nav-tabs">
                    {tabs.map(tab => (
                        <button
                            key={tab.id}
                            className={nav-tab ${activeTab === tab.id ? 'active' : ''}}
                            onClick={() => setActiveTab(tab.id)}
                        >
                            <i className={fas fa-${tab.icon}}></i> {tab.label}
                        </button>
                    ))}
                </nav>
            );
        }

        function Dashboard({ shift, startShift, endShift, points, controls, todayControls, missingPoints }) {
            const [name, setName] = useState('');

            const handleStartShift = () => {
                if (!name.trim()) {
                    alert('Lütfen personel adı girin!');
                    return;
                }
                startShift(name);
                setName('');
            };

            return (
                <div className="fade-in">
                    <div className="stats-grid">
                        <div className="stat-card">
                            <div className="stat-icon">
                                <i className="fas fa-map-marker-alt"></i>
                            </div>
                            <div className="stat-value">{points.length}</div>
                            <div className="stat-label">Toplam Nokta</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-icon">
                                <i className="fas fa-check-circle"></i>
                            </div>
                            <div className="stat-value">{todayControls.length}</div>
                            <div className="stat-label">Bugün Kontrol</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-icon">
                                <i className="fas fa-exclamation-triangle"></i>
                            </div>
                            <div className="stat-value">{missingPoints.length}</div>
                            <div className="stat-label">Eksik Nokta</div>
                        </div>
                        <div className="stat-card">
                            <div className="stat-icon">
                                <i className="fas fa-history"></i>
                            </div>
                            <div className="stat-value">{controls.length}</div>
                            <div className="stat-label">Toplam Kayıt</div>
                        </div>
                    </div>

                    <div className="card slide-up">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="fas fa-user-clock"></i>
                                Vardiya Yönetimi
                            </div>
                        </div>

                        {!shift ? (
                            <div>
                                <div className="form-group">
                                    <label className="form-label">Personel Adı</label>
                                    <input
                                        type="text"
                                        className="form-input"
                                        placeholder="Adınızı girin..."
                                        value={name}
                                        onChange={(e) => setName(e.target.value)}
                                        onKeyPress={(e) => e.key === 'Enter' && handleStartShift()}
                                    />
                                </div>
                                <button className="btn btn-primary" onClick={handleStartShift}>
                                    <span><i className="fas fa-play"></i> Vardiya Başlat</span>
                                </button>
                            </div>
                        ) : (
                            <div>
                                <div style={{ marginBottom: '20px', fontSize: '18px' }}>
                                    <strong>Personel:</strong> {shift.personnel}<br/>
                                    <strong>Başlangıç:</strong> {new Date(shift.start).toLocaleString('tr-TR')}
                                </div>
                                <button className="btn btn-danger" onClick={endShift}>
                                    <span><i className="fas fa-stop"></i> Vardiya Bitir</span>
                                </button>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function NFCScanner({ shift, scanning, setScanning, recordControl }) {
            const [nfcReader, setNfcReader] = useState(null);

            const startScanning = async () => {
                if (!shift) {
                    alert('⚠ Önce vardiya başlatmalısınız!');
                    return;
                }

                setScanning(true);
                const reader = await NFCManager.startScan((serialNumber) => {
                    recordControl(null, serialNumber);
                });
                setNfcReader(reader);
            };

            const stopScanning = () => {
                setScanning(false);
                setNfcReader(null);
            };

            return (
                <div className="card fade-in">
                    <div className="card-header">
                        <div className="card-title">
                            <i className="fas fa-wifi"></i>
                            NFC Etiket Okuma
                        </div>
                    </div>

                    <div className={nfc-scanner ${scanning ? 'scanning' : ''}}>
                        <div className="nfc-icon">
                            <i className="fas fa-broadcast-tower"></i>
                        </div>
                        <div className="nfc-status">
                            {scanning ? 'Etiket Bekleniyor...' : 'NFC Hazır'}
                        </div>
                        <div className="nfc-description">
                            {scanning 
                                ? 'Telefonu NFC etiketine yaklaştırın' 
                                : 'Okumaya başlamak için butona basın'}
                        </div>
                        
                        <div className="btn-group">
                            {!scanning ? (
                                <button className="btn btn-primary" onClick={startScanning}>
                                    <span><i className="fas fa-play"></i> Okumaya Başla</span>
                                </button>
                            ) : (
                                <button className="btn btn-danger" onClick={stopScanning}>
                                    <span><i className="fas fa-stop"></i> Durdur</span>
                                </button>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        function Reports({ controls, missingPoints }) {
            return (
                <div className="fade-in">
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="fas fa-check-circle"></i>
                                Bugünkü Kontroller
                            </div>
                            <span style={{color: 'var(--primary)', fontWeight: 'bold'}}>
                                {controls.length} Kontrol
                            </span>
                        </div>

                        {controls.length === 0 ? (
                            <div className="empty-state">
                                <i className="fas fa-clipboard-list"></i>
                                <h3>Henüz Kontrol Yok</h3>
                                <p>Bugün yapılan kontroller burada görünecek</p>
                            </div>
                        ) : (
                            <table className="report-table">
                                <thead>
                                    <tr>
                                        <th>Zaman</th>
                                        <th>Nokta</th>
                                        <th>Personel</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {controls.map(control => (
                                        <tr key={control.id}>
                                            <td>{new Date(control.timestamp).toLocaleTimeString('tr-TR')}</td>
                                            <td><strong>{control.pointName}</strong></td>
                                            <td>{control.personnel}</td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        )}
                    </div>

                    <div className="card slide-up" style={{animationDelay: '0.1s'}}>
                        <div className="card-header">
                            <div className="card-title">
                                <i className="fas fa-exclamation-triangle"></i>
                                Eksik Noktalar
                            </div>
                            <span style={{color: 'var(--danger)', fontWeight: 'bold'}}>
                                {missingPoints.length} Nokta
                            </span>
                        </div>

                        {missingPoints.length === 0 ? (
                            <div className="empty-state">
                                <i className="fas fa-thumbs-up"></i>
                                <h3>Harika!</h3>
                                <p>Tüm noktalar kontrol edildi</p>
                            </div>
                        ) : (
                            <div className="point-list">
                                {missingPoints.map((point, index) => (
                                    <div key={point.id} className="point-item">
                                        <div className="point-info">
                                            <div className="point-number">{index + 1}</div>
                                            <div className="point-details">
                                                <h4>{point.name}</h4>
                                                <p>NFC: {point.nfcId}</p>
                                            </div>
                                        </div>
                                        <div className="point-status unchecked">
                                            <i className="fas fa-times"></i> Kontrol Edilmedi
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function PointManagement({ points, addPoint }) {
            const [name, setName] = useState('');
            const [nfcId, setNfcId] = useState('');
            const [description, setDescription] = useState('');

            const handleAddPoint = () => {
                if (!name.trim() || !nfcId.trim()) {
                    alert('Nokta adı ve NFC ID gerekli!');
                    return;
                }

                addPoint(name, nfcId, description);
                setName('');
                setNfcId('');
                setDescription('');
            };

            return (
                <div className="fade-in">
                    <div className="card">
                        <div className="card-header">
                            <div className="card-title">
                                <i className="fas fa-plus-circle"></i>
                                Yeni Nokta Ekle
                            </div>
                        </div>

                        <div className="form-group">
                            <label className="form-label">Nokta Adı</label>
                            <input
                                type="text"
                                className="form-input"
                                placeholder="Örn: Ana Giriş Kapısı"
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                            />
                        </div>

                        <div className="form-group">
                            <label className="form-label">NFC ID</label>
                            <input
                                type="text"
                                className="form-input"
                                placeholder="Örn: NOKTA-001"
                                value={nfcId}
                                onChange={(e) => setNfcId(e.target.value)}
                            />
                        </div>

                        <div className="form-group">
                            <label className="form-label">Açıklama (Opsiyonel)</label>
                            <input
                                type="text"
                                className="form-input"
                                placeholder="Nokta hakkında bilgi..."
                                value={description}
                                onChange={(e) => setDescription(e.target.value)}
                            />
                        </div>

                        <button className="btn btn-primary" onClick={handleAddPoint}>
                            <span><i className="fas fa-plus"></i> Nokta Ekle</span>
                        </button>
                    </div>

                    <div className="card slide-up" style={{animationDelay: '0.1s'}}>
                        <div className="card-header">
                            <div className="card-title">
                                <i className="fas fa-list"></i>
                                Kayıtlı Noktalar
                            </div>
                            <span style={{color: 'var(--primary)', fontWeight: 'bold'}}>
                                {points.length} Nokta
                            </span>
                        </div>

                        {points.length === 0 ? (
                            <div className="empty-state">
                                <i className="fas fa-map-marked-alt"></i>
                                <h3>Henüz Nokta Yok</h3>
                                <p>Yukarıdaki formdan yeni nokta ekleyin</p>
                            </div>
                        ) : (
                            <div className="point-list">
                                {points.map((point, index) => (
                                    <div key={point.id} className="point-item">
                                        <div className="point-info">
                                            <div className="point-number">{index + 1}</div>
                                            <div className="point-details">
                                                <h4>{point.name}</h4>
                                                <p>NFC: {point.nfcId}</p>
                                                {point.description && (
                                                    <p style={{marginTop: '5px', color: 'var(--text-dim)'}}>
                                                        {point.description}
                                                    </p>
                                                )}
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
