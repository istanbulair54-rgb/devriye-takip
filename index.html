<!DOCTYPE html><html lang="tr"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="theme-color" content="#1a1a2e"><title>NFC Devriye</title><style>*{margin:0;padding:0;box-sizing:border-box}:root{--p:#0f8;--s:#0df;--d:#0f0f1e;--a:#f05}body{font-family:system-ui,sans-serif;background:linear-gradient(135deg,var(--d),#1a1a2e);color:#e0e0e0;min-height:100vh}.app{max-width:600px;margin:0 auto;background:rgba(26,26,46,.95);min-height:100vh}.hd{background:linear-gradient(135deg,var(--p),var(--s));padding:20px;text-align:center;color:#000;position:sticky;top:0;z-index:100}.hd h1{font-size:20px;font-weight:bold}.tabs{display:flex;background:#1a1a2e;position:sticky;top:60px;z-index:99;border-bottom:2px solid var(--p)}.tab{flex:1;padding:12px 5px;text-align:center;cursor:pointer;background:#1a1a2e;color:#e0e0e0;border:0;font-size:11px}.tab.act{background:linear-gradient(135deg,var(--p),var(--s));color:#000;font-weight:bold}.con{padding:15px}.tc{display:none}.tc.act{display:block}.cd{background:rgba(255,255,255,.05);border:1px solid rgba(0,255,136,.2);border-radius:10px;padding:15px;margin-bottom:15px}.st{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px}.sc{background:linear-gradient(135deg,rgba(0,255,136,.1),rgba(0,217,255,.1));border:1px solid var(--p);border-radius:10px;padding:15px;text-align:center}.sv{font-size:28px;font-weight:bold;color:var(--p)}.sl{font-size:10px;text-transform:uppercase}.nfc{background:linear-gradient(135deg,rgba(0,255,136,.2),rgba(0,217,255,.2));border:2px dashed var(--p);border-radius:15px;padding:30px;text-align:center;margin:15px 0;cursor:pointer}.btn{padding:12px;border:0;border-radius:8px;font-size:14px;font-weight:bold;cursor:pointer;width:100%;margin-bottom:10px}.bp{background:linear-gradient(135deg,var(--p),var(--s));color:#000}.bd{background:linear-gradient(135deg,var(--a),#c04);color:#fff}.ig{margin-bottom:12px}.ig label{display:block;margin-bottom:5px;color:var(--p);font-size:12px}.ig input,.ig select{width:100%;padding:10px;border:1px solid rgba(0,255,136,.3);border-radius:8px;background:rgba(255,255,255,.05);color:#e0e0e0;font-size:14px}.pi{background:rgba(255,255,255,.05);border-left:3px solid var(--p);padding:12px;margin-bottom:8px;border-radius:8px;display:flex;justify-content:space-between}.pn{font-weight:bold;color:var(--p)}.px{font-size:11px;color:var(--s)}.db{background:var(--a);color:#fff;border:0;padding:6px 12px;border-radius:5px;cursor:pointer;font-size:11px}.al{padding:12px;border-radius:8px;margin-bottom:12px;border-left:4px solid}.als{background:rgba(0,255,136,.1);border-color:var(--p);color:var(--p)}.ale{background:rgba(255,0,85,.1);border-color:var(--a);color:var(--a)}.ali{background:rgba(0,217,255,.1);border-color:var(--s);color:var(--s)}.ts{position:fixed;top:80px;left:50%;transform:translateX(-50%);padding:15px 25px;border-radius:8px;z-index:1000;font-weight:bold}.rt{width:100%;border-collapse:collapse;margin-top:15px;font-size:12px}.rt th,.rt td{padding:8px;text-align:left;border-bottom:1px solid rgba(0,255,136,.2)}.rt th{background:rgba(0,255,136,.1);color:var(--p);font-size:11px}.sok{color:var(--p)}.sms{color:var(--a)}</style></head><body><div class="app"><div class="hd"><h1>‚ö° NFC DEVRIYE ‚ö°</h1></div><div class="tabs"><button class="tab act" onclick="sw('d')">üìä</button><button class="tab" onclick="sw('s')">üì±</button><button class="tab" onclick="sw('r')">üìã</button><button class="tab" onclick="sw('p')">üìç</button></div><div class="con"><div id="d" class="tc act"><div class="st"><div class="sc"><div class="sv" id="tp">0</div><div class="sl">Nokta</div></div><div class="sc"><div class="sv" id="ts">0</div><div class="sl">Okuma</div></div><div class="sc"><div class="sv" id="cs">-</div><div class="sl">Vardiya</div></div><div class="sc"><div class="sv" id="ls">-</div><div class="sl">Son</div></div></div><div class="cd"><h3 style="color:var(--p)">‚è∞ Vardiya</h3><div class="ig"><select id="sh" onchange="csh()"><option value="">Se√ß</option><option value="Sabah">Sabah</option><option value="Ak≈üam">Ak≈üam</option><option value="Gece">Gece</option></select></div><button class="btn bd" onclick="esh()">Bitir</button></div></div><div id="s" class="tc"><div id="nst" class="al ali">NFC kontrol...</div><div class="nfc" onclick="snfc()"><div style="font-size:48px">üì°</div><h3 style="color:var(--p)">NFC Okut</h3></div><div class="cd"><h3 style="color:var(--p)">üìù Son</h3><div id="rs"><p style="text-align:center;padding:20px;opacity:.5">Okuma yok</p></div></div><div class="cd"><h3 style="color:var(--p)">üß™ Test</h3><div class="ig"><select id="tps"><option value="">Se√ß</option></select></div><button class="btn bp" onclick="tsc()">Test</button></div></div><div id="r" class="tc"><div class="cd"><h3 style="color:var(--p)">üìÖ Rapor</h3><div class="ig"><input type="date" id="rd"></div><button class="btn bp" onclick="gr()">Olu≈ütur</button></div><div id="rc"></div></div><div id="p" class="tc"><div class="cd"><h3 style="color:var(--p)">‚ûï Ekle</h3><div class="ig"><label>Ad</label><input id="pn" placeholder="Giri≈ü"></div><div class="ig"><label>NFC ID</label><input id="px" placeholder="ABCD1234"></div><button class="btn bp" onclick="ap()">Ekle</button></div><div class="cd"><h3 style="color:var(--p)">üìç Liste</h3><div id="pl"></div></div><div class="cd"><button class="btn bd" onclick="cl()">T√ºm√ºn√º Sil</button></div></div></div></div><script>const D={g:k=>{try{return JSON.parse(localStorage.getItem(k))}catch{return null}},s:(k,v)=>localStorage.setItem(k,JSON.stringify(v))};let nr=null,cs=D.g('cs')||null;function sw(t){document.querySelectorAll('.tab').forEach(e=>e.classList.remove('act'));document.querySelectorAll('.tc').forEach(e=>e.classList.remove('act'));event.target.classList.add('act');document.getElementById(t).classList.add('act');if(t==='d')ud();if(t==='p')lp();if(t==='s')utp()}async function infc(){const st=document.getElementById('nst');if('NDEFReader' in window){try{nr=new NDEFReader();st.className='al als';st.textContent='‚úÖ NFC hazƒ±r!';return true}catch(e){st.className='al ale';st.textContent='‚ùå NFC izni gerekli';return false}}else{st.className='al ale';st.textContent='‚ùå Chrome Android gerekli';return false}}async function snfc(){if(!nr)await infc();if(!cs){sh('error','‚ùå Vardiya ba≈ülatƒ±n!');return}const sc=document.querySelector('.nfc');try{await nr.scan();nr.addEventListener('reading',({serialNumber})=>{const nid=serialNumber.split(':').join('').toUpperCase();pnfc(nid)})}catch(e){sh('error','NFC hata')}}function pnfc(nid){const pts=D.g('pts')||[];const pt=pts.find(p=>p.nid.toUpperCase()===nid.toUpperCase());if(!pt){sh('error','‚ùå Bilinmeyen kart');return}const cts=D.g('cts')||[];cts.push({pid:pt.id,pn:pt.n,nid:nid,ts:new Date().toISOString(),sh:cs.n});D.s('cts',cts);sh('success',`‚úÖ ${pt.n}`);ars(pt.n,nid);ud();if('vibrate' in navigator)navigator.vibrate(200)}function tsc(){const sel=document.getElementById('tps');const pid=sel.value;if(!pid){sh('error','Se√ß!');return}const pts=D.g('pts')||[];const pt=pts.find(p=>p.id===pid);if(pt)pnfc(pt.nid)}function ars(n,nid){const c=document.getElementById('rs');const t=new Date().toLocaleTimeString('tr-TR');const h=`<div class="pi"><div><div class="pn">${n}</div><div class="px">${nid} ‚Ä¢ ${t}</div></div></div>`;if(c.querySelector('p'))c.innerHTML=h;else c.insertAdjacentHTML('afterbegin',h)}function csh(){const sel=document.getElementById('sh');const s=sel.value;if(!s)return;cs={n:s,st:new Date().toISOString()};D.s('cs',cs);ud();sh('success',`‚úÖ ${s} ba≈üladƒ±!`)}function esh(){if(!cs){sh('error','Vardiya yok!');return}if(confirm('Bitirmek istediƒüinize emin misiniz?')){cs=null;D.s('cs',null);document.getElementById('sh').value='';ud();sh('success','‚úÖ Bitti!')}}function ap(){const n=document.getElementById('pn').value.trim();const nid=document.getElementById('px').value.trim().toUpperCase();if(!n||!nid){sh('error','Doldurun!');return}const pts=D.g('pts')||[];if(pts.some(p=>p.nid===nid)){sh('error','ID kayƒ±tlƒ±!');return}pts.push({id:'p_'+Date.now(),n:n,nid:nid,ca:new Date().toISOString()});D.s('pts',pts);document.getElementById('pn').value='';document.getElementById('px').value='';lp();ud();sh('success','‚úÖ Eklendi!')}function dp(id){if(confirm('Silmek istediƒüinize emin misiniz?')){let pts=D.g('pts')||[];pts=pts.filter(p=>p.id!==id);D.s('pts',pts);lp();ud();sh('success','‚úÖ Silindi!')}}function lp(){const pts=D.g('pts')||[];const c=document.getElementById('pl');if(pts.length===0){c.innerHTML='<p style="text-align:center;padding:20px;opacity:.5">Nokta yok</p>';return}c.innerHTML=pts.map(pt=>`<div class="pi"><div><div class="pn">${pt.n}</div><div class="px">${pt.nid}</div></div><button class="db" onclick="dp('${pt.id}')">Sil</button></div>`).join('')}function utp(){const pts=D.g('pts')||[];const sel=document.getElementById('tps');sel.innerHTML='<option value="">Se√ß</option>'+pts.map(p=>`<option value="${p.id}">${p.n}</option>`).join('')}function ud(){const pts=D.g('pts')||[];const cts=D.g('cts')||[];const td=new Date().toISOString().split('T')[0];const tcs=cts.filter(c=>c.ts.startsWith(td));document.getElementById('tp').textContent=pts.length;document.getElementById('ts').textContent=tcs.length;document.getElementById('cs').textContent=cs?cs.n.substring(0,5):'-';if(tcs.length>0){const l=tcs[tcs.length-1];const t=new Date(l.ts).toLocaleTimeString('tr-TR',{hour:'2-digit',minute:'2-digit'});document.getElementById('ls').textContent=t}else{document.getElementById('ls').textContent='-'}}function gr(){const di=document.getElementById('rd').value;if(!di){sh('error','Tarih se√ßin!');return}const pts=D.g('pts')||[];const cts=D.g('cts')||[];const dcs=cts.filter(c=>c.ts.startsWith(di));if(dcs.length===0){document.getElementById('rc').innerHTML='<div class="cd"><p style="text-align:center;padding:20px;opacity:.5">Kayƒ±t yok</p></div>';return}const pst={};dcs.forEach(c=>{if(!pst[c.pid])pst[c.pid]={n:c.pn,ct:0};pst[c.pid].ct++});const sid=new Set(Object.keys(pst));const ms=pts.filter(p=>!sid.has(p.id));let h='<div class="cd"><h3 style="color:var(--p)">üìä √ñzet</h3>';h+=`<p style="font-size:13px">Toplam: <strong style="color:var(--s)">${dcs.length}</strong> okuma</p>`;h+=`<p style="font-size:13px">Eksik: <strong style="color:var(--a)">${ms.length}</strong> nokta</p></div>`;h+='<div class="cd"><table class="rt"><thead><tr><th>Nokta</th><th>Kontrol</th><th>Durum</th></tr></thead><tbody>';pts.forEach(pt=>{const st=pst[pt.id];if(st){h+=`<tr><td>${st.n}</td><td>${st.ct}x</td><td class="sok">‚úì</td></tr>`}else{h+=`<tr><td>${pt.n}</td><td>0x</td><td class="sms">‚úó</td></tr>`}});h+='</tbody></table></div>';document.getElementById('rc').innerHTML=h}function sh(t,m){const ts=document.createElement('div');ts.className=`ts al${t==='success'?'s':t==='error'?'e':'i'}`;ts.textContent=m;document.body.appendChild(ts);setTimeout(()=>ts.remove(),3000)}function cl(){if(confirm('‚ö†Ô∏è T√úM VERƒ∞LER Sƒ∞Lƒ∞NECEK!')){if(confirm('‚ö†Ô∏è Geri alƒ±namaz!')){localStorage.clear();location.reload()}}}window.addEventListener('load',()=>{infc();ud();lp();document.getElementById('rd').valueAsDate=new Date();if(cs)document.getElementById('sh').value=cs.n})</script></body></html>
